"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[384,2917],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(67294),i=n(86010);const r="tabItem_Ymn6";function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(87462),i=n(67294),r=n(86010),o=n(72389),s=n(67392),l=n(7094),c=n(12466);const p="tabList__CuJ",u="tabItem_LNqP";function d(e){const{lazy:t,block:n,defaultValue:o,values:d,groupId:h,className:m}=e,f=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=d??f.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),v=(0,s.l)(g,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===o?o:o??f.find((e=>e.props.default))?.props.value??f[0].props.value;if(null!==b&&!g.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:k}=(0,l.U)(),[w,x]=(0,i.useState)(b),N=[],{blockElementScrollPositionUntilNextRender:C}=(0,c.o5)();if(null!=h){const e=y[h];null!=e&&e!==w&&g.some((t=>t.value===e))&&x(e)}const O=e=>{const t=e.currentTarget,n=N.indexOf(t),a=g[n].value;a!==w&&(C(t),x(a),null!=h&&k(h,String(a)))},T=e=>{let t=null;switch(e.key){case"Enter":O(e);break;case"ArrowRight":{const n=N.indexOf(e.currentTarget)+1;t=N[n]??N[0];break}case"ArrowLeft":{const n=N.indexOf(e.currentTarget)-1;t=N[n]??N[N.length-1];break}}t?.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",p)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},m)},g.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>N.push(e),onKeyDown:T,onClick:O},o,{className:(0,r.Z)("tabs__item",u,o?.className,{"tabs__item--active":w===t})}),n??t)}))),t?(0,i.cloneElement)(f.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function h(e){const t=(0,o.Z)();return i.createElement(d,(0,a.Z)({key:String(t)},e))}},78473:(e,t,n)=>{n.r(t),n.d(t,{Config:()=>u,assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905)),r=n(53487);const o={},s=void 0,l={unversionedId:"definitions",id:"definitions",title:"definitions",description:"",source:"@site/docs/definitions.md",sourceDirName:".",slug:"/definitions",permalink:"/docs/definitions",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/definitions.md",tags:[],version:"current",frontMatter:{}},c={},p=[];function u(e){return r.g[e.v]}const d={toc:p,Config:u};function h(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}))}h.isMDXComponent=!0},8278:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905)),r=(n(65488),n(85162),n(78473));const o={id:"highlighting",title:"Highlighting and Snippet Extraction",sidebar_label:"Highlighting"},s=void 0,l={unversionedId:"search-apis/interpreting-responses/highlighting",id:"search-apis/interpreting-responses/highlighting",title:"Highlighting and Snippet Extraction",description:"When you receive search results from , alongside the",source:"@site/docs/search-apis/interpreting-responses/highlighting.md",sourceDirName:"search-apis/interpreting-responses",slug:"/search-apis/interpreting-responses/highlighting",permalink:"/docs/search-apis/interpreting-responses/highlighting",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/search-apis/interpreting-responses/highlighting.md",tags:[],version:"current",frontMatter:{id:"highlighting",title:"Highlighting and Snippet Extraction",sidebar_label:"Highlighting"},sidebar:"someSidebar",previous:{title:"Scores",permalink:"/docs/search-apis/interpreting-responses/intepreting-scores"},next:{title:"Corpus Administration",permalink:"/docs/admin-apis/admin"}},c={},p=[{value:"Text and Offset",id:"text-and-offset",level:2},{value:"Including Additional Context",id:"including-additional-context",level:2}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When you receive search results from ",(0,i.kt)(r.Config,{v:"names.product",mdxType:"Config"}),", alongside the\nresult, you'll receive a values for ",(0,i.kt)("inlineCode",{parentName:"p"},"section")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"offset"),".  For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "responseSet": [\n        {\n            "response": [\n                {\n                    "text": "Foo bar baz.",\n                    "score": 0.2553684115409851,\n                    "documentIndex": 0,\n                    "corpusKey": {\n                        "customerId": 0,\n                        "corpusId": 1234,\n                        "semantics": 0,\n                        "metadataFilter": "",\n                        "dim": []\n                    },\n                    "metadata": [\n                        {\n                            "name": "lang",\n                            "value": "eng"\n                        },\n                        {\n                            "name": "section",\n                            "value": "1"\n                        },\n                        {\n                            "name": "offset",\n                            "value": "36"\n                        }\n                    ]\n                },\n                ...\n            ]\n        }\n    ]\n}\n')),(0,i.kt)("p",null,"For highlighting and snippet extraction, we need to pay attention to three key\nelements in this response:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"text")," under ",(0,i.kt)("inlineCode",{parentName:"li"},"response")," which gives us the text/length to highlight"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"section")," under ",(0,i.kt)("inlineCode",{parentName:"li"},"metadata")," which tells us which specific section the\nrelevant snippet showed up in"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"offest")," under ",(0,i.kt)("inlineCode",{parentName:"li"},"metadata")," which tells us how far into the section the\nrelevant snippet is")),(0,i.kt)("h2",{id:"text-and-offset"},"Text and Offset"),(0,i.kt)("p",null,"The most familiar parts of highlighting or snippet extraction if you've used\nany other search system are the ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"offset")," values.  The ",(0,i.kt)("inlineCode",{parentName:"p"},"offset")," tells\nyou how many characters into the given section should be skipped before any\nhighlighting.  Following that, the ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," tells you what the specific text is\nto highlight."),(0,i.kt)("p",null,"For example, if the original text was:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The quick brown fox jumped over the lazy dog.  How vexingly quick daft zebras\njump!")),(0,i.kt)("p",null,'And if the query text is "striped horse-like animal," you might get back an\nan ',(0,i.kt)("inlineCode",{parentName:"p"},"offset"),' of 48 (how many characters before the sentence starting with "How"\nstarts) and a ',(0,i.kt)("inlineCode",{parentName:"p"},"text"),' value of "How vexingly quick daft zebras jump!"'),(0,i.kt)("h2",{id:"including-additional-context"},"Including Additional Context"),(0,i.kt)("p",null,"Often, just having the ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"offset")," values are enough to create a\ncompelling highlighting/snippet extraction experience for short-form documents\nlike social media posts and when you just have 1 section per documents.\nHowever, if you'd like to expand the snippet to include additional context,\nit's possible that the additional context may not be fully contained in the\ngiven section -- especially for longer documents.  In those cases, you might\nwant to include content from other sections."),(0,i.kt)("p",null,"If you created the sections yourself, you may choose to just replay the\nsectioning logic at query time and use as much of the additional sections as\ndesired.  However, if you aren't certain as to the section numbers and/or if\nyou uploaded documents using the\n",(0,i.kt)("a",{parentName:"p",href:"/docs/indexing-apis/format-for-upload"},"file upload API"),", then you might need\nto look up the additional sections.  This can be done by an additional query\nto ",(0,i.kt)(r.Config,{v:"names.product",mdxType:"Config"})," using\n",(0,i.kt)("a",{parentName:"p",href:"/docs/search-apis/sql/filter-overview"},"filters"),".  Do do this, retrieve the\n",(0,i.kt)("inlineCode",{parentName:"p"},"id")," value of the document and perform a query for that ID.  For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'curl -X POST ^\n{\n    "query":[\n        {\n            "query": "",\n            "start":0,\n            "numResults":10,\n            "corpusKey":[\n                {\n                    "customerId":123456789,\n                    "corpusId":1234,\n                    "semantics":0,\n                    "metadataFilter":"doc.id = \'5b943498-d18c-4095-92f9-7a03f026f680\'",\n                    "dim":[]\n                }\n            ]\n        }\n    ]\n}          \n')),(0,i.kt)("p",null,"In this example, the relevant document ID is\n",(0,i.kt)("inlineCode",{parentName:"p"},"5b943498-d18c-4095-92f9-7a03f026f680"),".  We can then iterate through the\nresults and show any number of sections either before (with a lower ",(0,i.kt)("inlineCode",{parentName:"p"},"section"),"\nnumber) or after (with a higher ",(0,i.kt)("inlineCode",{parentName:"p"},"section")," number) as additional context for the\nsnippet."))}d.isMDXComponent=!0},53487:e=>{e.exports=JSON.parse('{"g":{"domains.rest.serving":"api.vectara.io","domains.rest.admin":"api.vectara.io","domains.rest.indexing":"api.vectara.io","domains.grpc.serving":"serving.vectara.io","domains.grpc.admin":"admin.vectara.io","domains.grpc.indexing":"indexing.vectara.io","domains.oauth":"vectara-prod-${CUSTOMER_ID}.auth.us-west-2.amazoncognito.com","package.protobuf":"com.vectara","package.java":"com.vectara","package.php":"Com\\\\Vectara","names.company":"Vectara","names.product":"Vectara"}}')}}]);