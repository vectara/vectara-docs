"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[4036,2917],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||p[m]||o;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(67294),i=n(86010);const o="tabItem_Ymn6";function r(e){let{children:t,hidden:n,className:r}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(o,r),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(87462),i=n(67294),o=n(86010),r=n(72389),s=n(67392),l=n(7094),c=n(12466);const d="tabList__CuJ",u="tabItem_LNqP";function p(e){const{lazy:t,block:n,defaultValue:r,values:p,groupId:m,className:h}=e,f=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=p??f.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),v=(0,s.l)(g,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===r?r:r??f.find((e=>e.props.default))?.props.value??f[0].props.value;if(null!==b&&!g.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:k,setTabGroupChoices:y}=(0,l.U)(),[x,w]=(0,i.useState)(b),N=[],{blockElementScrollPositionUntilNextRender:D}=(0,c.o5)();if(null!=m){const e=k[m];null!=e&&e!==x&&g.some((t=>t.value===e))&&w(e)}const T=e=>{const t=e.currentTarget,n=N.indexOf(t),a=g[n].value;a!==x&&(D(t),w(a),null!=m&&y(m,String(a)))},C=e=>{let t=null;switch(e.key){case"Enter":T(e);break;case"ArrowRight":{const n=N.indexOf(e.currentTarget)+1;t=N[n]??N[0];break}case"ArrowLeft":{const n=N.indexOf(e.currentTarget)-1;t=N[n]??N[N.length-1];break}}t?.focus()};return i.createElement("div",{className:(0,o.Z)("tabs-container",d)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},h)},g.map((e=>{let{value:t,label:n,attributes:r}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:e=>N.push(e),onKeyDown:C,onClick:T},r,{className:(0,o.Z)("tabs__item",u,r?.className,{"tabs__item--active":x===t})}),n??t)}))),t?(0,i.cloneElement)(f.filter((e=>e.props.value===x))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==x})))))}function m(e){const t=(0,r.Z)();return i.createElement(p,(0,a.Z)({key:String(t)},e))}},78473:(e,t,n)=>{n.r(t),n.d(t,{Config:()=>u,assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var a=n(87462),i=(n(67294),n(3905)),o=n(53487);const r={},s=void 0,l={unversionedId:"definitions",id:"definitions",title:"definitions",description:"",source:"@site/docs/definitions.md",sourceDirName:".",slug:"/definitions",permalink:"/docs/definitions",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/definitions.md",tags:[],version:"current",frontMatter:{}},c={},d=[];function u(e){return o.g[e.v]}const p={toc:d,Config:u};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}))}m.isMDXComponent=!0},59093:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var a=n(87462),i=(n(67294),n(3905)),o=(n(65488),n(85162),n(78473)),r=n(53487);const s={id:"indexing",title:"Indexing",sidebar_label:"API Definition"},l=void 0,c={unversionedId:"indexing-apis/indexing",id:"indexing-apis/indexing",title:"Indexing",description:"The first step in using  is to index a set of related documents",source:"@site/docs/indexing-apis/indexing.md",sourceDirName:"indexing-apis",slug:"/indexing-apis/indexing",permalink:"/docs/indexing-apis/indexing",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/indexing-apis/indexing.md",tags:[],version:"current",frontMatter:{id:"indexing",title:"Indexing",sidebar_label:"API Definition"},sidebar:"someSidebar",previous:{title:"NodeJS",permalink:"/docs/getting-started-samples/app.js"},next:{title:"C#",permalink:"/docs/getting-started-samples/RestIndexData.cs"}},d={},u=[{value:"Endpoint Address",id:"endpoint-address",level:2},{value:"Full Definition",id:"full-definition",level:2},{value:"Service",id:"service",level:3},{value:"Index Document",id:"index-document",level:2},{value:"Document",id:"document",level:3},{value:"Section",id:"section",level:3},{value:"Custom Dimension",id:"custom-dimension",level:3},{value:"Frequently Asked Questions",id:"frequently-asked-questions",level:2},{value:"Error received from peer...Trying to connect an http1.x server",id:"error-received-from-peertrying-to-connect-an-http1x-server",level:3}],p={toc:u};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The first step in using ",(0,i.kt)(o.Config,{v:"names.product",mdxType:"Config"})," is to index a set of related documents\nor content into a corpus. This reference page provides a detailed guide for how\nto do that."),(0,i.kt)("h2",{id:"endpoint-address"},"Endpoint Address"),(0,i.kt)(o.Config,{v:"names.product",mdxType:"Config"})," exposes a REST endpoint at the following URL to index content into a corpus:",(0,i.kt)("code",null,"https://",(0,i.kt)(o.Config,{v:"domains.rest.indexing",mdxType:"Config"}),"/v1/index"),"This page describes the details of interacting with this endpoint.",(0,i.kt)("h2",{id:"full-definition"},"Full Definition"),(0,i.kt)("p",null,"The full definition of the gRPC interface is covered below."),(0,i.kt)("h3",{id:"service"},"Service"),(0,i.kt)("p",null,"The indexing service operates in two modes: ",(0,i.kt)("em",{parentName:"p"},"incremental")," and ",(0,i.kt)("em",{parentName:"p"},"batch"),". In\nincremental mode, individual documents or messages are sent to be indexed. In\na short period of time, generally a few minutes, the new content will become\navailable in the search index."),(0,i.kt)("p",null,"The definition of the incremental service is shown below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-protobuf"},"service IndexService {\n  // Adds a document to the corpus.\n  rpc Index(IndexDocumentRequest) returns (IndexDocumentResponse) {}\n\n  // Deletes a document from the corpus.\n  rpc Delete(DeleteDocumentRequest) returns (DeleteDocumentResponse) {}\n}\n")),(0,i.kt)("p",null,"When there are a large number of documents to process, it is more efficient to\nprocess them using the batch interface. This is described below."),(0,i.kt)("h2",{id:"index-document"},"Index Document"),(0,i.kt)("p",null,"A request to add data into a corpus consists of three key pieces of information:\nthe customer ID, the corpus ID, and the data itself, represented as a\n",(0,i.kt)("strong",{parentName:"p"},"Document")," message."),(0,i.kt)("pre",null,`\nmessage IndexDocumentRequest {\n  int64 customer_id = 1;\n  int64 corpus_id = 2;\n  ${r.g["package.protobuf"]}.indexing.Document document = 3;\n}\n`),(0,i.kt)("p",null,"The reply from the server consists of nothing yet. Note that the reply does not\nblock. In other words, the information in the request is not yet available in\nthe index when the RPC returns."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-protobuf"},"message IndexDocumentResponse {\n}\n")),(0,i.kt)("h3",{id:"document"},"Document"),(0,i.kt)("p",null,"A document is a piece of coherent textual matter. It defines an ID,\n",(0,i.kt)("strong",{parentName:"p"},"document_id"),", which must be unique among all the documents in\nthe same corpus. It may optionally specify a ",(0,i.kt)("strong",{parentName:"p"},"title")," and a ",(0,i.kt)("strong",{parentName:"p"},"description"),",\nas well as metadata in ",(0,i.kt)("strong",{parentName:"p"},"metadata_json"),"."),(0,i.kt)("p",null,"The field ",(0,i.kt)("strong",{parentName:"p"},"custom_dims"),", provide default values for the corresponding\nsection fields, should they fail to define them explicitly."),(0,i.kt)("p",null,"Most importantly, ",(0,i.kt)("strong",{parentName:"p"},"section")," defines the actual textual matter."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-protobuf"},"message Document {\n  string document_id = 1;\n  string title = 2;\n  string description = 3;\n  string metadata_json = 4;\n  repeated CustomDimension custom_dims = 5;\n\n  repeated Section section = 10;\n}\n")),(0,i.kt)("h3",{id:"section"},"Section"),(0,i.kt)("p",null,"A section represents an organizational subunit within a document. Its definition\nis recursive, since a section can be composed of further ",(0,i.kt)("strong",{parentName:"p"},"sections"),"."),(0,i.kt)("p",null,"The actual textual content, which is at least a single sentence, but might span\nseveral paragraphs or more, is stored in ",(0,i.kt)("strong",{parentName:"p"},"text"),". Like a Document, it may\noptionally specify a ",(0,i.kt)("strong",{parentName:"p"},"title"),", which semantically corresponds to a section\nheader or chapter title."),(0,i.kt)("p",null,"Sections are flexible, and it's possible that a section specifies a title, but\nrelegates the text to subsections. For instance, consider the following simple\ndocument, excerpted from Wikipedia:"),(0,i.kt)("blockquote",null,(0,i.kt)("h2",{parentName:"blockquote",id:"history"},"History"),(0,i.kt)("h3",{parentName:"blockquote",id:"first-inhabitants"},"First inhabitants"),(0,i.kt)("p",{parentName:"blockquote"},"Settled by successive waves of arrivals during at least the last 13,000\nyears,","[41]"," California was one of the most culturally and linguistically diverse\nareas in pre-Columbian North America. Various estimates of the native population\nrange from 100,000 to 300,000.","[42]"," The indigenous peoples of California included\nmore than 70 distinct ethnic groups of Native Americans, ranging from large,\nsettled populations living on the coast to groups in the interior. California\ngroups also were diverse in their political organization with bands, tribes,\nvillages, and on the resource-rich coasts, large chiefdoms, such as the Chumash,\nPomo and Salinan. Trade, intermarriage and military alliances fostered many\nsocial and economic relationships among the diverse groups."),(0,i.kt)("h3",{parentName:"blockquote",id:"spanish-rule"},"Spanish rule"),(0,i.kt)("p",{parentName:"blockquote"},"The first Europeans to explore the California coast were the members of a\nSpanish sailing expedition led by Portuguese captain Juan Rodr\xedguez Cabrillo;\nthey entered San Diego Bay on September 28, 1542, and reached at least as far\nnorth as San Miguel Island. Privateer and explorer Francis Drake explored\nand claimed an undefined portion of the California coast in 1579, landing north\nof the future city of San Francisco. The first Asians to set foot on what\nwould be the United States occurred in 1587, when Filipino sailors arrived in\nSpanish ships at Morro Bay. Sebasti\xe1n Vizca\xedno explored and\nmapped the coast of California in 1602 for New Spain, sailing as far north as\nCape Mendocino.")),(0,i.kt)("p",null,'This could be represented as a top-level section titled "History" and no text.\nIt would contain two sections, "First inhabitants" and "Spanish rule" that both\nspecify text.'),(0,i.kt)("p",null,"The part metadata, held in ",(0,i.kt)("strong",{parentName:"p"},"metadata_json"),", is returned in search query\nresults. It can contain, for example, information that links the item to records\nin other systems."),(0,i.kt)("p",null,"Finally, ",(0,i.kt)("strong",{parentName:"p"},"custom_dims")," allows you to specify additional factors that can be\nused at query time to control the ranking of results. The dimensions must be\ndefined ahead of time for the corpus, or else they'll be ignored."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-protobuf"},"message Section {\n  string title = 1;\n  string text = 2;\n  string metadata_json = 3;\n  repeated CustomDimension custom_dims = 4;\n\n  repeated Section section = 10;\n}\n")),(0,i.kt)("h3",{id:"custom-dimension"},"Custom Dimension"),(0,i.kt)("p",null,"Custom dimensions are a powerful feature of ",(0,i.kt)(o.Config,{v:"names.product",mdxType:"Config"}),". They allow you to\nattach numeric factors to every item in the index, which affect its final\nranking during searches. Some example use cases include:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Defining the authoritativeness of the content. For example, content with 100\nupvotes can be ranked higher than content with no upvotes and 10 downvotes."),(0,i.kt)("li",{parentName:"ol"},"Indicating the source of the content. If there are N sources, this is usually\ndone by defining N custom dimensions, and treating them as boolean 0-1 fields.\nThis allows weighting results based on source, or even excluding certain\nsources altogether. For example, content from a government FAQ would be rated\nhigher than content from a user forum."),(0,i.kt)("li",{parentName:"ol"},"Defining the geography in which content is relevant."),(0,i.kt)("li",{parentName:"ol"},"Indicating the publication date. This makes it easy to weight more recent\nresults higher.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-protobuf"},"message CustomDimension {\n  string name = 1;\n  double value = 2;\n}\n")),(0,i.kt)("p",null,"For more information on how to use custom dimensions, refer to the ",(0,i.kt)("a",{parentName:"p",href:"/docs/custom-dimensions"},"Custom Dimensions Usage Documentation")),(0,i.kt)("h2",{id:"frequently-asked-questions"},"Frequently Asked Questions"),(0,i.kt)("h3",{id:"error-received-from-peertrying-to-connect-an-http1x-server"},"Error received from peer...Trying to connect an http1.x server"),(0,i.kt)("p",null,"You are receiving this error message because you are trying to connect via\nan insecure channel. The endpoint only allows secure (TLS) connections."),(0,i.kt)("p",null,"This is bad:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"grpc.insecure_channel(...)\n")))}m.isMDXComponent=!0},53487:e=>{e.exports=JSON.parse('{"g":{"domains.rest.serving":"api.vectara.io","domains.rest.admin":"api.vectara.io","domains.rest.indexing":"api.vectara.io","domains.grpc.serving":"serving.vectara.io","domains.grpc.admin":"admin.vectara.io","domains.grpc.indexing":"indexing.vectara.io","domains.oauth":"vectara-prod-${CUSTOMER_ID}.auth.us-west-2.amazoncognito.com","package.protobuf":"com.vectara","package.java":"com.vectara","package.php":"Com\\\\Vectara","names.company":"Vectara","names.product":"Vectara"}}')}}]);