"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[276,2917],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},y=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),y=a,m=d["".concat(l,".").concat(y)]||d[y]||p[y]||r;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=y;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}y.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(67294),a=n(86010);const r="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,i),hidden:n},t)}},65488:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(87462),a=n(67294),r=n(86010),i=n(72389),s=n(67392),l=n(7094),c=n(12466);const u="tabList__CuJ",d="tabItem_LNqP";function p(e){const{lazy:t,block:n,defaultValue:i,values:p,groupId:y,className:m}=e,f=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=p??f.map((e=>{let{props:{value:t,label:n,attributes:o}}=e;return{value:t,label:n,attributes:o}})),h=(0,s.l)(k,((e,t)=>e.value===t.value));if(h.length>0)throw new Error(`Docusaurus error: Duplicate values "${h.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===i?i:i??f.find((e=>e.props.default))?.props.value??f[0].props.value;if(null!==v&&!k.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:g,setTabGroupChoices:b}=(0,l.U)(),[w,C]=(0,a.useState)(v),N=[],{blockElementScrollPositionUntilNextRender:S}=(0,c.o5)();if(null!=y){const e=g[y];null!=e&&e!==w&&k.some((t=>t.value===e))&&C(e)}const x=e=>{const t=e.currentTarget,n=N.indexOf(t),o=k[n].value;o!==w&&(S(t),C(o),null!=y&&b(y,String(o)))},T=e=>{let t=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const n=N.indexOf(e.currentTarget)+1;t=N[n]??N[0];break}case"ArrowLeft":{const n=N.indexOf(e.currentTarget)-1;t=N[n]??N[N.length-1];break}}t?.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},m)},k.map((e=>{let{value:t,label:n,attributes:i}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>N.push(e),onKeyDown:T,onClick:x},i,{className:(0,r.Z)("tabs__item",d,i?.className,{"tabs__item--active":w===t})}),n??t)}))),t?(0,a.cloneElement)(f.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function y(e){const t=(0,i.Z)();return a.createElement(p,(0,o.Z)({key:String(t)},e))}},1202:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var o=n(87462),a=(n(67294),n(3905)),r=(n(65488),n(85162),n(78473));const i={id:"encryption",title:"Data Encryption",sidebar_label:"Data Encryption"},s=void 0,l={unversionedId:"encryption",id:"encryption",title:"Data Encryption",description:"Overview",source:"@site/docs/data_encryption.md",sourceDirName:".",slug:"/encryption",permalink:"/docs/encryption",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/data_encryption.md",tags:[],version:"current",frontMatter:{id:"encryption",title:"Data Encryption",sidebar_label:"Data Encryption"},sidebar:"someSidebar",previous:{title:"NodeJS",permalink:"/docs/getting-started-samples/app.js"},next:{title:"Client Credentials Grant",permalink:"/docs/authentication"}},c={},u=[{value:"Overview",id:"overview",level:2},{value:"Create your AWS KMS key",id:"create-your-aws-kms-key",level:2},{value:"Attach your key to your account",id:"attach-your-key-to-your-account",level:2},{value:"How does it work",id:"how-does-it-work",level:2}],d={toc:u};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"When you send documents to the\n",(0,a.kt)("a",{parentName:"p",href:"/docs/indexing-apis/indexing"},"index API"),", ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," will\nreceive both document text and metadata information to be indexed. If you\nchoose the \u201ctextless\u201d option for\n",(0,a.kt)("a",{parentName:"p",href:"/docs/admin-apis/create-corpus"},"corpus creation"),", then document text will be\nindexed (converted into vectors) but not stored anywhere in the platform.\nMetadata, however, is always stored. For the safety of your\ndata, ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," always stores your text and metadata in an\nencrypted format. By default this encryption will\nuse ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"}),"'s own encryption key to encrypt your data\n(text and/or metadata)."),(0,a.kt)("p",null,"However, ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," also allows you to\nuse your own AWS KMS encryption key also so that you have full control over how\nyour data is encrypted.  If you would like to do so, follow the instructions\nbelow."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"If you use your own key and at some point disable your AWS KMS key, there is no\nway to encrypt or decrypt your data so your corpus will not be queryable by\nanyone until you enable the key back. You can disable and enable your KMS key\nto resume service but you should be very careful when removing your AWS KMS key\nas this is a permanently destructive action. If you remove the AWS KMS key\nentirely, neither you nor ",(0,a.kt)(r.Config,{v:"names.company",mdxType:"Config"})," will be able to recover\nthat encryption key, which also means any ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," corpora\ndepending on that key will be inaccessible forever.")),(0,a.kt)("h2",{id:"create-your-aws-kms-key"},"Create your AWS KMS key"),(0,a.kt)("p",null,"To create an AWS KMS key:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to KMS on the AWS Console"),(0,a.kt)("li",{parentName:"ol"},"Select \u201cCustomer Managed Keys\u201d"),(0,a.kt)("li",{parentName:"ol"},"Select the \u201cCreate key\u201d button"),(0,a.kt)("li",{parentName:"ol"},"Ensure \u201cKey Type\u201d is \u201cSymmetric\u201d and \u201cKey Usage\u201d is \u201cEncrypt and decrypt\u201d."),(0,a.kt)("li",{parentName:"ol"},"In the \u201cAdvanced options\u201d:",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Make sure \u201cKMS\u201d is selected for the \u201cKey material origin\u201d."),(0,a.kt)("li",{parentName:"ol"},"For the regionality:",(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Both \u201cSingle-Region key\u201d and \u201cMulti-Region key\u201d are ok if the key\nis created in the ",(0,a.kt)("inlineCode",{parentName:"li"},"us-west-2")," region."),(0,a.kt)("li",{parentName:"ol"},"If the key is not created in ",(0,a.kt)("inlineCode",{parentName:"li"},"us-west-2"),', it needs to be created as\na "Multi-Region key."  Then, after creating the key, go to the\n\u201cRegionality\u201d tab and create a replica key in ',(0,a.kt)("inlineCode",{parentName:"li"},"us-west-2")," by clicking\n\u201cCreate new replica keys\u201d."))),(0,a.kt)("li",{parentName:"ol"},"Eventually created key\u2019s ARN should start with ",(0,a.kt)("inlineCode",{parentName:"li"},"arn:aws:kms:us-west-2")))),(0,a.kt)("li",{parentName:"ol"},"On the \u201cDefine key usage permissions\u201d step of the key creation wizard, you\nshould see the \u201cOther AWS Accounts\u201d section at the bottom. Enter ",(0,a.kt)("inlineCode",{parentName:"li"},"941566284283"),"\nas the AWS ID (this is ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"}),"'s production AWS account ID.\nYou are giving permission to ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," to use your key to\nencrypt and decrypt your indexed documents."),(0,a.kt)("li",{parentName:"ol"},"On the last \u201cReview\u201d step, update the following section and\nupdate the ARN from ",(0,a.kt)("inlineCode",{parentName:"li"},"arn:aws:iam::941566284283:root"),"\nto ",(0,a.kt)("inlineCode",{parentName:"li"},"arn:aws:iam::941566284283:role/prod-eks2021021409582096910000000b"))),(0,a.kt)("p",null,"The key should look like the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Sid": "Allow use of the key",\n    "Effect": "Allow",\n    "Principal": {\n        "AWS": "arn:aws:iam::941566284283:role/prod-eks2021021409582096910000000b"\n    },\n    "Action": [\n        "kms:Encrypt",\n        "kms:Decrypt",\n        "kms:ReEncrypt*",\n        "kms:GenerateDataKey*",\n        "kms:DescribeKey"\n    ],\n    "Resource": "*"\n}\n')),(0,a.kt)("p",null,"The final step to creating the AWS KMS key to finish the key creation."),(0,a.kt)("h2",{id:"attach-your-key-to-your-account"},"Attach your key to your account"),(0,a.kt)("p",null,"In order to get ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," to use your key, you must currently\ncontact ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," to use your key Support and send us the ARN\nfor the KMS key you created (starting with ",(0,a.kt)("inlineCode",{parentName:"p"},"arn:aws:kms:us-west-2"),").\nThe ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," team will set it up for you. In the future, you\nwill be able to set the ARN on the The ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," Console and\nthese instructions will be updated."),(0,a.kt)("h2",{id:"how-does-it-work"},"How does it work"),(0,a.kt)("p",null,"Once your AWS KMS key is configured in the platform, when encrypting your\ndocument text or metadata, ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," will connect to your KMS\nservice to generate an encryption key. The encryption key provided by the KMS\nis stored in-memory and used to encrypt and decrypt your data. In-memory key\nwill expire every hour.  In turn, every hour ",(0,a.kt)(r.Config,{v:"names.product",mdxType:"Config"})," will\nask your AWS KMS to generate that encryption key again."))}p.isMDXComponent=!0},78473:(e,t,n)=>{n.r(t),n.d(t,{Config:()=>d,assets:()=>c,contentTitle:()=>s,default:()=>y,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var o=n(87462),a=(n(67294),n(3905)),r=n(53487);const i={},s=void 0,l={unversionedId:"definitions",id:"definitions",title:"definitions",description:"",source:"@site/docs/definitions.md",sourceDirName:".",slug:"/definitions",permalink:"/docs/definitions",draft:!1,editUrl:"https://github.com/vectara/vectara-docs/tree/master/www/docs/definitions.md",tags:[],version:"current",frontMatter:{}},c={},u=[];function d(e){return r.g[e.v]}const p={toc:u,Config:d};function y(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}))}y.isMDXComponent=!0},53487:e=>{e.exports=JSON.parse('{"g":{"domains.rest.serving":"api.vectara.io","domains.rest.admin":"api.vectara.io","domains.rest.indexing":"api.vectara.io","domains.grpc.serving":"serving.vectara.io","domains.grpc.admin":"admin.vectara.io","domains.grpc.indexing":"indexing.vectara.io","domains.oauth":"vectara-prod-${CUSTOMER_ID}.auth.us-west-2.amazoncognito.com","package.protobuf":"com.vectara","package.java":"com.vectara","package.php":"Com\\\\Vectara","names.company":"Vectara","names.product":"Vectara"}}')}}]);