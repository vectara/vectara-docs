---
id: get-filter-attribute-stats
title: "Get filter attribute statistics for corpus metadata"
description: "Retrieve statistics and value distributions for filter attributes in a corpus. This endpoint provides insights into the metadata structure and content distribution, enabling users to understand available filter values and build effective metadata queries."
sidebar_label: "Get filter attribute statistics for corpus metadata"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "get api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Get filter attribute statistics for corpus metadata"}
>
</Heading>

<MethodEndpoint
  method={"get"}
  path={"/v2/corpora/{corpus_key}/filter_attribute_stats"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Retrieve statistics and value distributions for filter attributes in a corpus. This endpoint provides insights into the metadata structure and content distribution, enabling users to understand available filter values and build effective metadata queries.

This endpoint analyzes document and part metadata fields defined as filter attributes and returns:
- **Value distributions**: Top occurring values with their counts
- **Statistics**: Min, max, average, and sum for numeric fields

By default, statistics are computed across all filter attributes at both document and part levels. You can optionally:
- Request statistics for specific fields only
- Apply metadata filters to analyze a subset of the corpus
- Limit the number of distinct values returned per field

**Performance and Caching**: Results may be cached for improved performance, with cache duration varying by corpus size. Cached results can take up to 1 hour to refresh for large corpora. Smaller corpora with faster query times have shorter cache durations (2-15 minutes) to ensure fresher data.

The `corpus_key` uniquely identifies the corpus. For more information, see [Create a corpus](https://docs.vectara.com/docs/rest-api/create-corpus).


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}},{"in":"path","name":"corpus_key","description":"The unique key identifying the corpus to retrieve filter attribute statistics for.","required":true,"schema":{"description":"A user-provided key for a corpus.","type":"string","example":"my-corpus","pattern":"[a-zA-Z0-9_\\=\\-]+$","maxLength":50,"title":"CorpusKey"}},{"name":"fields","in":"query","description":"Comma-separated list of qualified field names to retrieve statistics for (e.g., 'doc.category,part.status'). If omitted, returns statistics for all filter attributes in the corpus. Field names must match the qualified format 'level.fieldname' where level is either 'doc' or 'part'.","required":false,"schema":{"type":"string"},"example":"doc.category,doc.year,part.status"},{"name":"metadata_filter","in":"query","description":"Optional metadata filter expression to pre-filter documents or parts before computing statistics. Uses the same SQL-style filter syntax as query operations. When provided, statistics reflect only the filtered subset of the corpus.","required":false,"schema":{"type":"string"},"example":"doc.year >= 2020 AND doc.category = 'financial'"},{"name":"max_values","in":"query","description":"Maximum number of distinct values to return per field in the 'values' array, ordered by occurrence count (descending).","required":false,"schema":{"type":"integer","format":"int32","minimum":1,"maximum":1000,"default":100},"example":50}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Successfully retrieved filter attribute statistics for the corpus.","content":{"application/json":{"schema":{"type":"object","description":"Response containing statistics and value distributions for filter attributes in a corpus, providing insights into metadata distributions and values.","properties":{"filter_attribute_stats":{"description":"Array of statistics, one per requested or available filter attribute. Each statistic contains value distributions and optional numeric statistics.","type":"array","items":{"type":"object","description":"Aggregation result for a single filter attribute, showing the distribution of values and optional statistics for numeric types.","properties":{"name":{"description":"The qualified field name in the format 'level.fieldname' (e.g., 'doc.category' for document-level or 'part.status' for part-level metadata). This name can be used in metadata filter expressions.","type":"string","example":"doc.category"},"type":{"description":"The data type of this filter attribute, which determines the aggregation behavior. Numeric types (integer, real_number, and their list variants) include statistical aggregations, while text and boolean types provide value distributions.","type":"string","enum":["integer","real_number","text","boolean","list[integer]","list[real_number]","list[text]"],"example":"text"},"description":{"description":"Human-readable description of what this field represents, as defined in the corpus filter attribute schema. May be empty if no description was provided during corpus creation.","type":"string","example":"The category of the document (e.g., contract, invoice, report)."},"values":{"description":"Array of the most frequently occurring distinct values for this field, ordered by occurrence count (descending). Limited by the max_values query parameter. For list-type attributes, each array element is counted independently.","type":"array","items":{"type":"object","description":"A single distinct value and its occurrence count within the faceted field.","properties":{"value":{"description":"The actual value from the metadata field. Type depends on the filter attribute type (string for text, number for integer/real_number, boolean for boolean).","example":"contract"},"count":{"description":"Number of documents or parts (depending on the filter attribute level) that contain this value. For list-type attributes, a single document may contribute to multiple value counts.","type":"integer","format":"int64","example":42}},"required":["value","count"],"title":"FilterAttributeValue"}},"stats":{"description":"Statistical aggregations for numeric types (integer, real_number, and their list variants). Not present for text or boolean types. Provides min, max, average, and sum across all values.","type":"object","properties":{"min":{"description":"Minimum value found across all documents or parts for this numeric field.","type":"number","format":"double","example":2020},"max":{"description":"Maximum value found across all documents or parts for this numeric field.","type":"number","format":"double","example":2024},"avg":{"description":"Average (mean) value across all documents or parts for this numeric field. For list types, all individual values are included in the calculation.","type":"number","format":"double","example":2022.5},"sum":{"description":"Sum of all values across all documents or parts for this numeric field. For list types, all individual values are included in the sum.","type":"number","format":"double","example":8090}},"required":["min","max","avg","sum"],"title":"FilterAttributeNumericStats"}},"required":["name","type","values"],"title":"FilterAttributeStat"}}},"required":["filter_attribute_stats"],"title":"GetFilterAttributeStatsResponse"},"examples":{"Financial":{"summary":"Filter attribute statistics for a financial documents corpus showing distribution across document categories, years, and report types","value":{"filter_attribute_stats":[{"name":"doc.category","type":"text","description":"The category of financial document (e.g., quarterly report, annual filing)","values":[{"value":"quarterly_report","count":152},{"value":"annual_filing","count":89},{"value":"earnings_call","count":45},{"value":"sec_filing","count":28}]},{"name":"doc.year","type":"integer","description":"The fiscal year of the report","values":[{"value":2024,"count":128},{"value":2023,"count":95},{"value":2022,"count":72},{"value":2021,"count":48},{"value":2020,"count":21}],"stats":{"min":2020,"max":2024,"avg":2022.8,"sum":7391296}}]}},"Legal":{"summary":"Filter attribute statistics for a legal documents corpus showing distribution across jurisdictions, case types, and document statuses","value":{"filter_attribute_stats":[{"name":"doc.jurisdiction","type":"text","description":"Legal jurisdiction of the case (e.g., Delaware, California)","values":[{"value":"Delaware","count":184},{"value":"California","count":142},{"value":"New York","count":89}]},{"name":"doc.case_type","type":"text","description":"Type of legal case","values":[{"value":"intellectual_property","count":156},{"value":"employment","count":98},{"value":"contract_dispute","count":76},{"value":"corporate","count":54},{"value":"other","count":31}]},{"name":"part.reviewed","type":"boolean","description":"Whether this part has been legally reviewed","values":[{"value":true,"count":892},{"value":false,"count":234}]}]}},"Support":{"summary":"Filter attribute statistics for a support knowledge base corpus showing distribution across products, issue categories, and platforms","value":{"filter_attribute_stats":[{"name":"doc.product","type":"text","description":"Product or service related to the support article","values":[{"value":"portal_app","count":245},{"value":"mobile_app","count":189},{"value":"api_service","count":142},{"value":"desktop_client","count":98},{"value":"admin_console","count":67},{"value":"other","count":34}]},{"name":"part.category","type":"list[text]","description":"Categories or tags for the support content (can have multiple per part)","values":[{"value":"authentication","count":456},{"value":"performance","count":389},{"value":"configuration","count":312},{"value":"troubleshooting","count":289},{"value":"integration","count":201}]},{"name":"doc.priority","type":"integer","description":"Priority level of the issue (1-5, where 1 is highest)","values":[{"value":3,"count":298},{"value":2,"count":245},{"value":4,"count":189},{"value":1,"count":134},{"value":5,"count":89}],"stats":{"min":1,"max":5,"avg":2.9,"sum":2776}}]}}}}}},"400":{"description":"Bad request - invalid parameters or corpus does not support filter attribute statistics (not backed by OpenSearch).","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow retrieving filter attribute statistics for this corpus.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}},"404":{"description":"Corpus not found.","content":{"application/json":{"schema":{"description":"Error returned when a requested resource does not exist.","type":"object","properties":{"id":{"description":"The ID cannot be found.","type":"string"},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"NotFoundError"}}}}}}
>
  
</StatusCodes>


      