---
id: test-instruction
title: "Test instruction"
description: "Test an instruction by rendering its template with provided context data and tools."
sidebar_label: "Test instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Test instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions/{instruction_id}/test"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Test an instruction by rendering its template with provided context data and tools.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}},{"in":"path","name":"instruction_id","description":"The unique identifier of the instruction to test.","required":true,"schema":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"}},{"in":"query","name":"version","description":"The specific version of the instruction to test. If not specified, the latest version will be used.","required":false,"schema":{"type":"integer","minimum":1,"example":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to test an instruction with provided context data.","type":"object","properties":{"context":{"description":"Context data to use when rendering the instruction template.","type":"object","additionalProperties":true,"example":{"currentDate":"2024-01-15","companyName":"Acme Corp"}},"tools":{"description":"List of tools to include in the instruction context for testing.","type":"array","items":{"description":"A tool that can be used by agents to perform specific actions or operations.","discriminator":{"propertyName":"type","mapping":{"mcp":{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},"corpora_search":{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},"web_search":{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"}}},"oneOf":[{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"}],"title":"Tool"},"default":[],"example":[]}},"title":"TestInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The instruction has been tested successfully and the rendered result is returned.","content":{"application/json":{"schema":{"description":"Response containing the rendered instruction.","type":"object","properties":{"rendered_instruction":{"description":"The instruction template rendered with the provided context.","type":"string","example":"You are a helpful customer support agent for Acme Corp. Today's date is 2024-01-15. You have access to the following tools: Web Search, Email Sender"}},"required":["rendered_instruction"],"title":"TestInstructionResponse"}}}},"400":{"description":"Test request was malformed or template rendering failed.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow testing this instruction.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}},"404":{"description":"Instruction not found.","content":{"application/json":{"schema":{"description":"Error returned when a requested resource does not exist.","type":"object","properties":{"id":{"description":"The ID cannot be found.","type":"string"},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"NotFoundError"}}}}}}
>
  
</StatusCodes>


      