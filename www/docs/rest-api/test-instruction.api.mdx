---
id: test-instruction
title: "Test instruction"
description: "Test an instruction by rendering its template with provided context data and tools."
sidebar_label: "Test instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Test instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions/{instruction_id}/test"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Test an instruction by rendering its template with provided context data and tools.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}},{"in":"path","name":"instruction_id","description":"The unique identifier of the instruction to test.","required":true,"schema":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"}},{"in":"query","name":"version","description":"The specific version of the instruction to test. If not specified, the latest version will be used.","required":false,"schema":{"type":"integer","minimum":1,"example":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to test an instruction with provided context data.","type":"object","properties":{"context":{"description":"Context data to use when rendering the instruction template.","type":"object","additionalProperties":true,"example":{"currentDate":"2024-01-15","companyName":"Acme Corp"}},"tools":{"description":"List of tools to include in the instruction context for testing.","type":"array","items":{"description":"A tool that can be used by agents to perform specific actions or operations.","type":"object","properties":{"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool in the tool server.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"}},"required":["id","name","description","enabled"],"discriminator":{"propertyName":"type","mapping":{"mcp":{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},"corpora_search":{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},"web_search":{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"}}},"oneOf":[{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"}],"title":"Tool"},"default":[],"example":[]}},"title":"TestInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The instruction has been tested successfully and the rendered result is returned.","content":{"application/json":{"schema":{"description":"Response containing the rendered instruction.","type":"object","properties":{"rendered_instruction":{"description":"The instruction template rendered with the provided context.","type":"string","example":"You are a helpful customer support agent for Acme Corp. Today's date is 2024-01-15. You have access to the following tools: Web Search, Email Sender"}},"required":["rendered_instruction"],"title":"TestInstructionResponse"}}}},"400":{"description":"Test request was malformed or template rendering failed.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow testing this instruction.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}},"404":{"description":"Instruction not found.","content":{"application/json":{"schema":{"description":"Error returned when a requested resource does not exist.","type":"object","properties":{"id":{"description":"The ID cannot be found.","type":"string"},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"NotFoundError"}}}}}}
>
  
</StatusCodes>


      