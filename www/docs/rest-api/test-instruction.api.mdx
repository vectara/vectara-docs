---
id: test-instruction
title: "Test instruction"
description: "Test an instruction template using supplied context and available tools. This endpoint evaluates Velocity expressions such as `\$tools`, `\${session.metadata.field}`, or `\${agent.metadata.field}`, and returns the fully rendered template output. Use this operation to validate formatting, logic, or metadata-dependent behavior before deploying instructions to agents."
sidebar_label: "Test instruction"
hide_title: true
hide_table_of_contents: true
api: eJztPf1z2zay/wqGk5kmfpIsO0nvTvPu5rlJes/zLk2mdq/zLs6TIXIl4QwCLADa1nn0v7/ZBUBCEv2Rph9uj/mhNUkQWOz3LnbFm8zxhc0mH7JjZZ2pcye0stnHQVaAzY2o8DqbZKdgHeOKiXYUc1BWkjtgtRVqwWxdVVJAwXKtHFzj8ILxSy4kn0lgTmtpR+x0KSwDVVRaKMfgksuaO7Ds7yB1LtyKwXVlwFoEg9k6XzJu2fnZ2RN6/3xAf99YP2JUguMFd3w0FyCL9fmAaeNH8AUo1/EcgTLgaqMsc0tg81rKFTOgCjBQtHvStatqN2LfWWAOYdYVGO73rdkll6LAYXNtSu6cUIsBk3ohcoIgLjssoMKZlWMzWPJLoQ2bwVwbYAVUUq8QbwlKLc5NkNtRNsiaJY+LbJI5sC4hUjbIKm54CQ4MEvAmE0ioJfACTDbIFC8hm2Tfwg81WDc8FSXo2mU7hF0CO3p/zK6ElKzkF8A4myGxYT7XxiFAuS4rCQ4IX8bPx4SiS1tBLuZIdQu5VoXF7TtREgJxDzZfQsmzyU3mVhUCJJSDBUFYCiXKuswmB+tBhvMKA0U2mXNpYT142H6Gb4WUwv582ypp/s/ZW7OVirtlu5GE7FNRdG6gVuKHGphABkJoDNNzAm9DCjVDzkB4Whw6U0MK30PmnmuzJeE4Z9iZdUaoBfGcc2CU38D0w3j4Jz7819HwH9Phx/94kg0yuOaI1vA8r63TJZgpKgdt3FQogTzohKMxCT8fF1mLqh9qMKsWV5dgrGf53Y0EUuUsDLoLR+x4zpR2LXkHNBQF3rpmAuKZGao1KDbRSqz5QLonqDhYrz/6acC6r3Sxwle3iUVaUzl8xFGR5iT5+/+0uNObW2kZ5CFucVtHXwm3ZJXRl6JINDOpxJa4evZPyJEslUGV4wRYXCiM3l3zVTINLlxbYFdLUEGNolLboUDQq8EARBSXYBZQMKGcZudPtrX6OfFko5J5noO1ozN1pt541E6QoCtdxx2y85uzLK+NAeVecwdn2YSdZYfjwxfD8cHw4OVZhiYAX8i5CvMx0Uh9u5LtgGaUTHw+OlMd+ONFIXC7XL5PMOnp23DDTQphNknAy5ALyoqr1Tee74/yEtgrbSoUjYws4C41/iasI6bHx0gOoXJZFxB3lZIhMoDHq0W7lfABN4aj1AkHZcdCR7QEc0vuCH9BRNhsFWwWLl6BQZvYiiUPlk2b1oSSdSsETl4KxZ02uFrgvrh5AmqQlbyqUPVMbrIyrzqgUuztq/fs6VtdgGSRNd8b7XSu5bMUZq0U5B5MuEYtxiW9a8Gg7BNW8IFCWZnXKve0FG51v7D4p7uaVlhml7qWBePyiq8sYu28zKvzLuVawJzX0mUT2mqqTPF6PchEsbvGd92anDZ+twb/P6fldLS3sRDeOjh8Di9efvmHIfzxT7PhwWHxfMhfvPxy+OLwyy8PXhz84cV4PE6U+KnWErX3IPOInH4qlIEA9wFrzQ6w1kwNX0wtcJMvt0A6oUk9YN6OPAwm0gQIVZCflkN2AVw3S27P/d91ydXQAC+894ujomnqpsx6y7rtil8BjgsJBUse4JxXyN0N2IUGS27uUl+hcktE9b5Fp1ED7q7e+OeNkkRcLUCRSKsFK1aKlyIPMLTv2hH7Hm2DBTfwnnQzg7Ct480dM7Ui7wq1iNFFnUOyqXZCMgBHTVzRAHbJjcA7dnKmhuz8iY8AkPLnbMiO8IrhVfq0tTRxRLzDSl75kdEOXMAKh534S3YBq83n6Vxx0O5sqRFhQ/bKX6IphX3avVDs+OQd++OX44MQXbCnMFqMBt6SvRwejIeHL04PXk6ejycvXv7jLHu2YRHPshOSBo+3XKu5WNSIYZI32mOCGqYVe7JhMVPD1ohhKlevW1KcRnZZDzJQiPwOyf9+CW4JqVxZFlaUKxZe2woWEdbaQsKvM60lcJUqSbSr60GWG+AOiinv8FQwSrCOl5X3TxoQrrhl4b0urePxnk0yJMsQyYI7rKviRy0kuXUsvPzw1YSqaje9y4X3z7xtK2AuFPiQFq4ryB25VVXtmLf+tYFGu6FG29JBn+rC3G0MvfveDksM3M4mPLPSGyj5FlRBzuyW5l2jJ3A9NWBr6Wyn7707ecmv0Rtnqi5nPnoK7+MKPgswytZrdK64Utp552QX2+8qjxK2FOjm8JmunadvCOtrs9+4ife6CmgUplrJ1RSn213teM4I31sqHQOXUhdivmLCYQ7lUhitSpTkXTHxet37fZfw4IVKvmo8uOT9wL22eyFRQFlpDF7uW8dARTLHci6l9cGJRS3EzcKyJb8EpjRrWRCjdchv2Z+uQE2vtJHFvdvz1tyB4ej+0bKNA4i2HynTtcj6bnmIWvFtXqFiPEpYaL2R0vgQnVkK9MkZ2WTXVn1uCf7HQXY9vITcccPfc9SZlKzD5fDZFgSIllybShsefaIONyKMiKLXOsj+BmkRo+vFkv3dL9y84TSbC0qgSbjkCgMnr7w2kwU/hYu8uY17vOWtPacu4tajx+9D/xhXtXdMe8e0d0x7x/S37ph2WKbH6KPCNeQ1pgkXHJNrKejenfxljf8rv7SXrugGXMHsDhfgCmZ3mn/w7pICnyr8Bex9C+89tj7ZWGpzk9u9je9tfG/jexvf2/jHaOO3TM9jtu9aRYgp/yRFKdxPnXn6ZV2F72G26SZIXs6KDhIfoQSYoadsexi2cfgX0FTgcWk4yGmOAkdn6m80dTiWNDWeSzN07fLawIBZroqZvoYiTWT51IwBq2uTAyOE41SvGokNdQSWvV+5pVbs+ejg0L/FUa4puWSBzkOlmBluMLPTeVb7Gb6KR9o9fkrAbOozhFu9f/Kr+CcND3+qjyK5WtR80ckfgN7CwvCyRDckjox78QRvVh6xlpEx/7vBxMhpnrm7FTUoLCv5kFX0jq/Qi7wW7qX0D7d62/hbso0No/xcRhHdwWRULPjYypsTdLG4pzKaym5InJcG7FLLIpnDW7gOIxiGYq1k7bc4F9JReVA8dPFFlp+HSz9Hikyjy8/A5nqQxRentKDo1jivm2co7TwxkfoW4+jtX5fdo6hiby+ogzftg8neHnru4UEoUJuQwsD7b2gRunXSzOurcRd/F1Z7DU0mF4MUYbWk2B3f3ds7klJfYYmjLmoJdm9vws6x3AyLbEvulvh/5HxkfPw711KCr+bBS+HANEW5tPt4YWh4fM2tsH7nHNd8C6U2K2/XJ+xgPH77FXsaowTSL3WF+Dv461fPNvZHZZe6dhP2fNxUmna9+XzcPKcZvgF3pc1FqPWasNfCerWWIgYHfi0kMLuyDspm8LfAiyEpaowateFmxXA2W/GcIrlvNPMVjqzi+QUqfswHcemx3Opz9rShQa6xHIsL5Z55op+uKmDJ0VEgOdUd46PkYNI7BLXTmIHJvRbZj/zv5QSLqvQlGNrTSbO+p0FYvM6dnbBzrBtD+rwWOf0/HnLi398poRWR7Bg37rxQRVIGjvEa1bObL6a9JpDtA/ytH29TfyZj2mU5c13cAmAj7DgkSO+3wY1HOXpb26iuGGfnQYc+fXaOx41mxXz1e7uVTmprxdoK7y3ab5ObYHjfjuYGWMWt9QroAlZX2hR4zFqXVKlXcpcvoTlpb/ZjxUJxVKOjzlC8xVIB82ganqKpmDApLCVZgt6fsLnU3LE/s/GzyZlijAX9DwX7M/twTRu6RqVIlkbM2TX7S/v6R/+KD5XYjb/Cf1/kulbuiwmToJ7GGZ8NkgH8EgxfwBcTZuuyHcL2N1/BJRuIQFpg43SW+GiK4H0xaYb6Iesz4pDQB4C2wjru6o7aAWSXdhjzwyIzE/vcxZ+gCn+HpqCoz/+1wbL+1iY8YIw2d5SLJjD5oYiPCBMKUFjprvrQLVcZnc2osaeNcu42n61q3xj4IFdoU5VgWUi7LBqKabAAu6u+DWE5bBgWZMLwSrJcd1F3COyzyfPxOHF5n48Tejwfh2qVkuzdtJzdDokfwmrrrQcrYcFnq81aiy5IxgkoB+PDFwksB+MUmIPxeN1GYi3eX23QZzsP0ejnoAWTHMLXgTKtA/Tp1Q7J9G1Co8vtemBew+caYlKj8QWLqVAFXIfy4durmWkU2NaJLFih86AqqTgdWTJWQ2DWkSpkKO+ADURUV220ZKiLm1fb6QbIXqTUB01WdsAcJYx9S5Io+WKD5j9FnqIDD/ckLbowlyqarud9OqM/bumPW/rjlj6l9BhTSolJixr75z13wUKI2k4v4IGHLxewijp4FTvHHDcLcMxPRVtpbGrcBOWj4t0uqDpwuGvdfbtUAdeJLV8KMChUIufesFOF7S9/VnPSgHsc9tz4N/VsSmJ9t1djK36lMPtEvVhcin/h4Ug9G3rN4DRbclVIiMH7gJW1dGJoHVTMcXthKeBUutS1lRhinsSXMYAUynFynDFIddD2lsX8Gw4JWgglPtimFBhKwsRGMUodkNmkpaW4CLGIgUsBV4NggCSeD5HWo1brJv23ksgVP/VRT4Pq+xynhiQb7lJzt3eSfhUnqeX2xlMinS1cpPVd3lJv5n47Zq4htFCXOr+1Qu2OvP8vrN3rGTmhXqfTYYiCd3P6IYe+wfWxKsm+wbUPevugtw96e2/gUXsDfYNr3+DaN7j+Phtc+37Wvp+190N7P7T3Q3s/9LH7oX0/60/Vz9q3sPZmvTfrvVnvzXpv1n91s963sD6iFta+c7XvXP2duyV952pvEh+5Sew7V/vO1b5zte9c7TtX+87VvnO171ztO1f7ztW+c/VTO1f7HtW+R/X3lLjoz1P685T+PKVPHvU9qv9uPap9X2rfl9o7Rn1f6r+9aftt96V+3JRIz/qBJz6kiZwPH9NQ/XTzU+XhG8VZNE+20sp6pXc4HndjPP1q7ZKj0kNag6Vj8prS3P7T7cjNjr7gHTx3X6XgnXlMwXlO+NGfV/bAkhXhQkXr36zW/bnsWxtj/FvT5K37t9/EJ82i5Ag4n27e+LJzZ0au0cP/q2tKr3K2BFnNa8ni97ljzjmYReTe5tvDI3aqC776wlJQgHhtv1g8Yjgn9bWErynHtKzGI5royNkJ+x5m7CSYxzclF5Kd0G52MjCdOPp4B295AgXmetHJT/hh7PiFd1QTJZeoCT6LM95g6rFhMa+LeLNKYJcmF5nmw7Vhl0LTR8ejYmlTmvcz0VyALG5NkiLzhKwoaSsDxDrYeBYdGprAxu7fAPHDlVJX8rQEi2nA9OluyjUQMIzdNWzr5hvpnQ3WuLPj19E0R0TvfI0a3UeQVZMJi5xdwKxeeAt8RQU7Rm98/DqBIkL6FS+C6iJiNyz2fBe492BKQTG2ZYWmVjaOEhC/su0zDVvK4kdy3lHjcULgwaCjfDVRyIp7HxW1Y0D4A/LRCRU76sHC0+DUzHBXV8uVt4O0os7J2bg78X4PF6T66liFFjbfI+lXGT1CRtlkjxcdnXqJOkfemOta/WzKx9tAX4jWNFbCtegW8k0WuAOfOZ3wIfoa6Hc809+nHvhGu69xyxtkPjzsMjTBUmPkKsJZ+jyEAjX4SN7bgy4D3+uE36VOWKPnPQejhra4GC6Mrquhj2qzhAtstjGsBLfURRyHVoTQ4EBZ38L94Saj/NUtc9OJar2zBmZmdl5L12rfozUxAvCPsb5AExQVd8tsku1fHu6nc+/fJFdTUaz3A9Th12cI5NrIbJItnavsZH+fV2IUQpKR0LRYLDeh0UeV+B9YHdW43oePCPs7vDikq2TwCUqF59E4oE22cbqxnWzz4xKvNZAcg0Spr3yaUApQ7pUByjJw6ZlVX4D6bnMbtVsm+9j3S+7TSNx/risCzvNCuqlWS9JNitlwYuAFnZoG8l8PeSWGSDecAHVB8Eu+0sXqTZv1DFEA/dnm0LNJ1nrspGLKiqvVN37uxs+nHAk66x7XGTZKpdIZZeLbNyen7Oj9MbvcxWp8ZmNkgjkjw5t2dzoPDuflyEYUaVzBbDjjVPDRajysfcbYAqWTerS5lCi+ujZ+Ae7YeTcfIWP+JyIMVEHlKn85Zyj/CHO85etMdO0kVYkHXxiPbHSNFTizeBjqVYaw9Pa3MAcDKod4VupzKQZQ/4mF8hpkRq1ntaAfFsABPhjChKfjquCmIBxi/NUkDOgQaUhgBsrFmjkMuPb2Lg/39kZ0YpNu7DxMjcnUjZRwcqrrq5ywXs7k3HqAlqtqCYRixr6m34QiFhqw8/3Q97c/aXPk+80587nPYwbIkK9G4xGl7cCU9t0cf5FI5JCIRqRKrst9CQsu92noUM+H1g/eJ70n9YKYbVM/FDq3o3QKUS7ilPjLCEXJzcWoIhPBpTsl3o+MmpHeLbi5+JzZp1Islu6uNSjUy0noAAPbbJLNAYoZzy/+K5mdRBc1aMnJkgfRptg0DXV3kouNR+DHctWdHPB0RoMlRZsQ2Er2kXyPGCWVIxMxQI1P0WhzdgnXlYEQztg6X2Ip1vnZ2ZOmUPLs7MnN9kHjiALL9Tnlv2nE5qFm+5zTby6g82pDyQxmcpr0RrMnn0QPRWYIM3omPNaqhqAZwrEkhlkDJvVC5ARBXHZYABYjoUiFHzMxbAZzTVJbSU0nOqkhw7lDL0hr4RGZ+5XkgqqniJFugiX8kJEm3LLlk01rSEJiHWYylmhGJx+ymxvUet8ZuV7j7dDtg7//Fko9s8mcSwt3ccQS2rg+Kozg5GxwiaZAdMSO5xQNhHegGIRqf3zaTHAlpOxIQG+iwHsRURW0bgNZ8Xj2/YnbeRorEZ+RJqx3kvx3bO02OKOBVasUyAj/FpHWaPiC9f10SqCJINyV/AIt3wyRCvM5epBOh+MsBxsuaLA8DUGaGmFMIOP5u65v35vfQ/AFhqe+0niDFoNfZQ+lkFJ89kaGb2ma7f34sa881MNTnw6PI3ZipvaNozyHyt05NnV23787Oc0G2UwXdEhcUkVtZvhVNqD/EhNpX1JCuV28l5YHZ35O/Pf/bXOBLQ==
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Test instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions/{instruction_id}/test"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Test an instruction template using supplied context and available tools. This endpoint evaluates Velocity expressions such as `\$tools`, `\${session.metadata.field}`, or `\${agent.metadata.field}`, and returns the fully rendered template output. Use this operation to validate formatting, logic, or metadata-dependent behavior before deploying instructions to agents.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}},{"in":"path","name":"instruction_id","description":"The unique identifier of the instruction to test.","required":true,"schema":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"}},{"in":"query","name":"version","description":"The specific version of the instruction to test. If not specified, the latest version will be used.","required":false,"schema":{"type":"integer","minimum":1,"example":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to test an instruction with provided context data.","type":"object","properties":{"context":{"description":"Context data to use when rendering the instruction template. This will be merged into `$session.metadata` for template access.\n\nExample: If you provide `{\"currentDate\": \"2024-01-15\"}`, you can access it in the template as `$session.metadata.currentDate`.\n","type":"object","additionalProperties":true,"example":{"currentDate":"2024-01-15","companyName":"Acme Corp"}},"tools":{"description":"List of tools to include in the instruction context for testing.","type":"array","items":{"description":"A tool that can be used by agents to perform specific actions or operations.","discriminator":{"propertyName":"type","mapping":{"mcp":{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},"corpora_search":{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},"web_search":{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"},"lambda":{"description":"A user-defined function that can be executed as a tool by agents.\nLambda tools run in a secure, sandboxed environment with resource limits.\nCurrently supports Python 3.12 with a curated set of libraries.\n","type":"object","properties":{"type":{"description":"This should always be `lambda`.","type":"string","default":"lambda","example":"lambda"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the function does and how it can be used.","type":"string"},"language":{"description":"The programming language of the lambda function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"default":"python","example":"python"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the function.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"data":{"type":"array","description":"Input data to process."},"threshold":{"type":"number","description":"Threshold value for filtering."}}}},"output_schema":{"description":"The schema that defines the expected output structure from the function.","type":"object","additionalProperties":true},"function_definition":{"description":"Definition of a function to be executed as a tool in a sandboxed environment.\n\n**Python Environment:**\n- Python version: 3.12\n- Execution: Sandboxed using gVisor for security isolation\n- **Allowed modules**: `json`, `math`, `datetime`, `collections`, `itertools`, `functools`, `re`, `time`, `typing`\n- Memory limit: 100MB (configurable up to 1GB)\n- Execution timeout: 30 seconds (configurable up to 300 seconds)\n- Network access: Disabled for security\n- File system access: Read-only temporary workspace\n- No custom package installation supported (security constraint)\n\n**Type Annotations:**\n- Use type annotations for automatic input/output schema discovery\n- Supported typing constructs: `List`, `Dict`, `Optional`, `Union`\n- Import from `typing` module when using complex types\n","type":"object","properties":{"language":{"description":"The programming language of the function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"example":"python"},"code":{"description":"The function code.\n\n**Required**: Must define a `process()` entry point function. Use type annotations on parameters for automatic schema discovery.\n\nParameters are passed as keyword arguments matched to the function signature.\n","type":"string","example":"def process(data: list, threshold: float = 0):\n    filtered = [x for x in data if x > threshold]\n    return {\n        'count': len(filtered),\n        'average': sum(filtered) / len(filtered) if filtered else 0,\n        'filtered_data': filtered\n    }\n"},"validation_status":{"description":"The validation status of the code.","type":"string","enum":["pending","valid","invalid"],"example":"valid"},"validation_errors":{"description":"List of validation errors if the code is invalid.","type":"array","items":{"type":"string"}},"execution_configuration":{"description":"Execution configuration for the function.","type":"object","properties":{"max_execution_time_seconds":{"description":"Maximum execution time in seconds.","type":"integer","minimum":1,"maximum":300,"default":30,"example":30},"max_memory_mb":{"description":"Maximum memory usage in megabytes.","type":"integer","minimum":10,"maximum":1024,"default":100,"example":100}},"title":"ExecutionConfiguration"}},"required":["language","code"],"title":"FunctionDefinition"}},"required":["type","id","name","description","language","enabled","function_definition"],"x-vectaraParents":["Tool"],"title":"LambdaTool"},"structured_indexing":{"description":"A tool that indexes structured documents into the Vectara platform with full control over document structure, sections, metadata, tables, and images.","type":"object","properties":{"type":{"description":"This should always be `structured_indexing`.","type":"string","default":"structured_indexing","example":"structured_indexing"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the structured indexing tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"corpus_key":{"type":"string","description":"The key identifying the target corpus for document indexing."},"document":{"type":"object","description":"The structured document to index with full hierarchical content."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"StructuredIndexingTool"},"sub_agent":{"description":"A tool that spawns a specialized sub-agent to handle complex, multi-step tasks autonomously.\nSub-agents maintain separate context from the main agent and can be specialized for specific types of tasks like code review, general research, or output styling.\n","type":"object","properties":{"type":{"description":"This should always be `sub_agent`.","type":"string","default":"sub_agent","example":"sub_agent"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the sub-agent does and when it should be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the sub-agent invocation.","type":"object","additionalProperties":true}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"SubAgentTool"}}},"oneOf":[{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"},{"description":"A user-defined function that can be executed as a tool by agents.\nLambda tools run in a secure, sandboxed environment with resource limits.\nCurrently supports Python 3.12 with a curated set of libraries.\n","type":"object","properties":{"type":{"description":"This should always be `lambda`.","type":"string","default":"lambda","example":"lambda"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the function does and how it can be used.","type":"string"},"language":{"description":"The programming language of the lambda function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"default":"python","example":"python"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the function.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"data":{"type":"array","description":"Input data to process."},"threshold":{"type":"number","description":"Threshold value for filtering."}}}},"output_schema":{"description":"The schema that defines the expected output structure from the function.","type":"object","additionalProperties":true},"function_definition":{"description":"Definition of a function to be executed as a tool in a sandboxed environment.\n\n**Python Environment:**\n- Python version: 3.12\n- Execution: Sandboxed using gVisor for security isolation\n- **Allowed modules**: `json`, `math`, `datetime`, `collections`, `itertools`, `functools`, `re`, `time`, `typing`\n- Memory limit: 100MB (configurable up to 1GB)\n- Execution timeout: 30 seconds (configurable up to 300 seconds)\n- Network access: Disabled for security\n- File system access: Read-only temporary workspace\n- No custom package installation supported (security constraint)\n\n**Type Annotations:**\n- Use type annotations for automatic input/output schema discovery\n- Supported typing constructs: `List`, `Dict`, `Optional`, `Union`\n- Import from `typing` module when using complex types\n","type":"object","properties":{"language":{"description":"The programming language of the function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"example":"python"},"code":{"description":"The function code.\n\n**Required**: Must define a `process()` entry point function. Use type annotations on parameters for automatic schema discovery.\n\nParameters are passed as keyword arguments matched to the function signature.\n","type":"string","example":"def process(data: list, threshold: float = 0):\n    filtered = [x for x in data if x > threshold]\n    return {\n        'count': len(filtered),\n        'average': sum(filtered) / len(filtered) if filtered else 0,\n        'filtered_data': filtered\n    }\n"},"validation_status":{"description":"The validation status of the code.","type":"string","enum":["pending","valid","invalid"],"example":"valid"},"validation_errors":{"description":"List of validation errors if the code is invalid.","type":"array","items":{"type":"string"}},"execution_configuration":{"description":"Execution configuration for the function.","type":"object","properties":{"max_execution_time_seconds":{"description":"Maximum execution time in seconds.","type":"integer","minimum":1,"maximum":300,"default":30,"example":30},"max_memory_mb":{"description":"Maximum memory usage in megabytes.","type":"integer","minimum":10,"maximum":1024,"default":100,"example":100}},"title":"ExecutionConfiguration"}},"required":["language","code"],"title":"FunctionDefinition"}},"required":["type","id","name","description","language","enabled","function_definition"],"x-vectaraParents":["Tool"],"title":"LambdaTool"},{"description":"A tool that indexes structured documents into the Vectara platform with full control over document structure, sections, metadata, tables, and images.","type":"object","properties":{"type":{"description":"This should always be `structured_indexing`.","type":"string","default":"structured_indexing","example":"structured_indexing"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"description_template":{"description":"Velocity template for generating dynamic tool descriptions. When set, this template is rendered at runtime to produce the tool description.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n\nExample: \"Search tool configured for agent $agent.name on $currentDate\"\n","type":"string","title":"ToolDescriptionTemplate"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the structured indexing tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"corpus_key":{"type":"string","description":"The key identifying the target corpus for document indexing."},"document":{"type":"object","description":"The structured document to index with full hierarchical content."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"StructuredIndexingTool"},{"description":"A tool that spawns a specialized sub-agent to handle complex, multi-step tasks autonomously.\nSub-agents maintain separate context from the main agent and can be specialized for specific types of tasks like code review, general research, or output styling.\n","type":"object","properties":{"type":{"description":"This should always be `sub_agent`.","type":"string","default":"sub_agent","example":"sub_agent"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the sub-agent does and when it should be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the sub-agent invocation.","type":"object","additionalProperties":true}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"SubAgentTool"}],"title":"Tool"},"default":[],"example":[]}},"title":"TestInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The instruction has been tested successfully and the rendered result is returned.","content":{"application/json":{"schema":{"description":"Response containing the rendered instruction.","type":"object","properties":{"rendered_instruction":{"description":"The instruction template rendered with the provided context.","type":"string","example":"You are a helpful customer support agent for Acme Corp. Today's date is 2024-01-15. You have access to the following tools: Web Search, Email Sender"}},"required":["rendered_instruction"],"title":"TestInstructionResponse"}}}},"400":{"description":"Test request was malformed.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow testing this instruction.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}},"404":{"description":"Instruction not found.","content":{"application/json":{"schema":{"description":"Error returned when a requested resource does not exist.","type":"object","properties":{"id":{"description":"The ID cannot be found.","type":"string"},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"NotFoundError"}}}},"422":{"description":"Template compilation failed due to invalid instruction template.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}}}}
>
  
</StatusCodes>


      