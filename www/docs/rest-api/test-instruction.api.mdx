---
id: test-instruction
title: "Test instruction"
description: "Test an instruction by rendering its template with provided context data and tools."
sidebar_label: "Test instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Test instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions/{instruction_id}/test"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Test an instruction by rendering its template with provided context data and tools.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}},{"in":"path","name":"instruction_id","description":"The unique identifier of the instruction to test.","required":true,"schema":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"}},{"in":"query","name":"version","description":"The specific version of the instruction to test. If not specified, the latest version will be used.","required":false,"schema":{"type":"integer","minimum":1,"example":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to test an instruction with provided context data.","type":"object","properties":{"context":{"description":"Context data to use when rendering the instruction template.","type":"object","additionalProperties":true,"example":{"currentDate":"2024-01-15","companyName":"Acme Corp"}},"tools":{"description":"List of tools to include in the instruction context for testing.","type":"array","items":{"description":"A tool that can be used by agents to perform specific actions or operations.","discriminator":{"propertyName":"type","mapping":{"mcp":{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},"corpora_search":{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},"web_search":{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"},"lambda":{"description":"A user-defined function that can be executed as a tool by agents.\nLambda tools run in a secure, sandboxed environment with resource limits.\nCurrently supports Python 3.12 with a curated set of libraries.\n","type":"object","properties":{"type":{"description":"This should always be `lambda`.","type":"string","default":"lambda","example":"lambda"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the function does and how it can be used.","type":"string"},"language":{"description":"The programming language of the lambda function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"default":"python","example":"python"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the function.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"data":{"type":"array","description":"Input data to process."},"threshold":{"type":"number","description":"Threshold value for filtering."}}}},"output_schema":{"description":"The schema that defines the expected output structure from the function.","type":"object","additionalProperties":true},"function_definition":{"description":"Definition of a function to be executed as a tool in a sandboxed environment.\n\n**Python Environment:**\n- Python version: 3.12\n- Execution: Sandboxed using gVisor for security isolation\n- **Allowed modules**: `json`, `math`, `datetime`, `collections`, `itertools`, `functools`, `re`, `time`, `typing`\n- Memory limit: 100MB (configurable up to 1GB)\n- Execution timeout: 30 seconds (configurable up to 300 seconds)\n- Network access: Disabled for security\n- File system access: Read-only temporary workspace\n- No custom package installation supported (security constraint)\n\n**Type Annotations:**\n- Use type annotations for automatic input/output schema discovery\n- Supported typing constructs: `List`, `Dict`, `Optional`, `Union`\n- Import from `typing` module when using complex types\n","type":"object","properties":{"language":{"description":"The programming language of the function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"example":"python"},"code":{"description":"The function code.\n\n**Required**: Must define a `process()` entry point function. Use type annotations on parameters for automatic schema discovery.\n\nParameters are passed as keyword arguments matched to the function signature.\n","type":"string","example":"def process(data: list, threshold: float = 0):\n    filtered = [x for x in data if x > threshold]\n    return {\n        'count': len(filtered),\n        'average': sum(filtered) / len(filtered) if filtered else 0,\n        'filtered_data': filtered\n    }\n"},"validation_status":{"description":"The validation status of the code.","type":"string","enum":["pending","valid","invalid"],"example":"valid"},"validation_errors":{"description":"List of validation errors if the code is invalid.","type":"array","items":{"type":"string"}},"execution_configuration":{"description":"Execution configuration for the function.","type":"object","properties":{"max_execution_time_seconds":{"description":"Maximum execution time in seconds.","type":"integer","minimum":1,"maximum":300,"default":30,"example":30},"max_memory_mb":{"description":"Maximum memory usage in megabytes.","type":"integer","minimum":10,"maximum":1024,"default":100,"example":100}},"title":"ExecutionConfiguration"}},"required":["language","code"],"title":"FunctionDefinition"}},"required":["type","id","name","description","language","enabled","function_definition"],"x-vectaraParents":["Tool"],"title":"LambdaTool"},"structured_indexing":{"description":"A tool that indexes structured documents into the Vectara platform with full control over document structure, sections, metadata, tables, and images.","type":"object","properties":{"type":{"description":"This should always be `structured_indexing`.","type":"string","default":"structured_indexing","example":"structured_indexing"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the structured indexing tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"corpus_key":{"type":"string","description":"The key identifying the target corpus for document indexing."},"document":{"type":"object","description":"The structured document to index with full hierarchical content."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"StructuredIndexingTool"}}},"oneOf":[{"description":"An MCP (Model Context Protocol) tool that connects to external MCP servers for extended functionality.","type":"object","properties":{"type":{"description":"This should always be `mcp`.","type":"string","default":"mcp","example":"mcp"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"server_id":{"description":"Unique identifier for a tool server.","type":"string","pattern":"^tsr_.*","example":"tsr_rag_search","title":"ToolServerId"},"name":{"description":"Unique identifier for the tool in the MCP server.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the MCP tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to send to the MCP server."},"max_results":{"type":"integer","description":"The maximum number of results to return."}}}},"annotations":{"description":"Optional hints about tool behaviour/metadata.","type":"object","properties":{"read_only_hint":{"description":"If true, the tool does not modify its environment.","type":"boolean"},"destructive_hint":{"description":"If true, the tool may perform destructive updates.","type":"boolean"},"idempotent_hint":{"description":"If true, repeated calls with same args have no additional effect.","type":"boolean"},"open_world_hint":{"description":"If true, tool interacts with external entities.","type":"boolean"}},"additionalProperties":true,"title":"McpToolAnnotations"}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"McpTool"},{"description":"A corpora search tool that searches through Vectara corpora to find relevant information.","type":"object","properties":{"type":{"description":"This should always be `corpora_search`.","type":"string","default":"corpora_search","example":"corpora_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the corpora search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute against the corpora."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"CorporaSearchTool"},{"description":"A web search tool that searches the internet for relevant information.","type":"object","properties":{"type":{"description":"This should always be `web_search`.","type":"string","default":"web_search","example":"web_search"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the web search tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"query":{"type":"string","description":"The search query to execute on the web."},"limit":{"type":"integer","description":"The maximum number of results to return."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"WebSearchTool"},{"description":"A user-defined function that can be executed as a tool by agents.\nLambda tools run in a secure, sandboxed environment with resource limits.\nCurrently supports Python 3.12 with a curated set of libraries.\n","type":"object","properties":{"type":{"description":"This should always be `lambda`.","type":"string","default":"lambda","example":"lambda"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the function does and how it can be used.","type":"string"},"language":{"description":"The programming language of the lambda function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"default":"python","example":"python"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the function.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"data":{"type":"array","description":"Input data to process."},"threshold":{"type":"number","description":"Threshold value for filtering."}}}},"output_schema":{"description":"The schema that defines the expected output structure from the function.","type":"object","additionalProperties":true},"function_definition":{"description":"Definition of a function to be executed as a tool in a sandboxed environment.\n\n**Python Environment:**\n- Python version: 3.12\n- Execution: Sandboxed using gVisor for security isolation\n- **Allowed modules**: `json`, `math`, `datetime`, `collections`, `itertools`, `functools`, `re`, `time`, `typing`\n- Memory limit: 100MB (configurable up to 1GB)\n- Execution timeout: 30 seconds (configurable up to 300 seconds)\n- Network access: Disabled for security\n- File system access: Read-only temporary workspace\n- No custom package installation supported (security constraint)\n\n**Type Annotations:**\n- Use type annotations for automatic input/output schema discovery\n- Supported typing constructs: `List`, `Dict`, `Optional`, `Union`\n- Import from `typing` module when using complex types\n","type":"object","properties":{"language":{"description":"The programming language of the function. Currently only Python 3.12 is supported.","type":"string","enum":["python"],"example":"python"},"code":{"description":"The function code.\n\n**Required**: Must define a `process()` entry point function. Use type annotations on parameters for automatic schema discovery.\n\nParameters are passed as keyword arguments matched to the function signature.\n","type":"string","example":"def process(data: list, threshold: float = 0):\n    filtered = [x for x in data if x > threshold]\n    return {\n        'count': len(filtered),\n        'average': sum(filtered) / len(filtered) if filtered else 0,\n        'filtered_data': filtered\n    }\n"},"validation_status":{"description":"The validation status of the code.","type":"string","enum":["pending","valid","invalid"],"example":"valid"},"validation_errors":{"description":"List of validation errors if the code is invalid.","type":"array","items":{"type":"string"}},"execution_configuration":{"description":"Execution configuration for the function.","type":"object","properties":{"max_execution_time_seconds":{"description":"Maximum execution time in seconds.","type":"integer","minimum":1,"maximum":300,"default":30,"example":30},"max_memory_mb":{"description":"Maximum memory usage in megabytes.","type":"integer","minimum":10,"maximum":1024,"default":100,"example":100}},"title":"ExecutionConfiguration"}},"required":["language","code"],"title":"FunctionDefinition"}},"required":["type","id","name","description","language","enabled","function_definition"],"x-vectaraParents":["Tool"],"title":"LambdaTool"},{"description":"A tool that indexes structured documents into the Vectara platform with full control over document structure, sections, metadata, tables, and images.","type":"object","properties":{"type":{"description":"This should always be `structured_indexing`.","type":"string","default":"structured_indexing","example":"structured_indexing"},"id":{"description":"Unique identifier for a tool.","type":"string","pattern":"^tol_.*","example":"tol_123e4567-e89b-12d3-a456-426614174000","title":"ToolId"},"name":{"description":"Unique identifier for the tool.","type":"string"},"title":{"description":"Human-readable title of the tool.","type":"string"},"description":{"description":"A detailed description of what the tool does and how it can be used.","type":"string"},"enabled":{"description":"Whether the tool is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the tool was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the tool was last updated.","type":"string","format":"date-time"},"input_schema":{"description":"The schema that defines the expected input structure for the structured indexing tool.","type":"object","additionalProperties":true,"example":{"type":"object","properties":{"corpus_key":{"type":"string","description":"The key identifying the target corpus for document indexing."},"document":{"type":"object","description":"The structured document to index with full hierarchical content."}}}}},"required":["type","id","name","description","enabled","input_schema"],"x-vectaraParents":["Tool"],"title":"StructuredIndexingTool"}],"title":"Tool"},"default":[],"example":[]}},"title":"TestInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"The instruction has been tested successfully and the rendered result is returned.","content":{"application/json":{"schema":{"description":"Response containing the rendered instruction.","type":"object","properties":{"rendered_instruction":{"description":"The instruction template rendered with the provided context.","type":"string","example":"You are a helpful customer support agent for Acme Corp. Today's date is 2024-01-15. You have access to the following tools: Web Search, Email Sender"}},"required":["rendered_instruction"],"title":"TestInstructionResponse"}}}},"400":{"description":"Test request was malformed or template rendering failed.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow testing this instruction.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}},"404":{"description":"Instruction not found.","content":{"application/json":{"schema":{"description":"Error returned when a requested resource does not exist.","type":"object","properties":{"id":{"description":"The ID cannot be found.","type":"string"},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"NotFoundError"}}}}}}
>
  
</StatusCodes>


      