---
id: create-instruction
title: "Create instruction"
description: "Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage."
sidebar_label: "Create instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage.

Instructions support dynamic content using the Apache Velocity templating engine. Velocity variables allow instructions to reference runtime context:

- `\\$tools`: The list of tools available to the agent.
- `\\${session.metadata.field}`: Session-level metadata (user context, permissions, preferences).
- `\\${agent.metadata.field}`: Agent-level metadata (configuration or environment).

Example tool iteration:
```velocity
You have access to the following tools:
\\#foreach(\\$tool in \\$tools)
  - \\${tool.name}: \\${tool.description}
#end
```
:::tip Tips for effective instruction design
Provide directive language in the template to shape the agentâ€™s behavior. You can emphasize specific requirements using capital letters or negative instructions such as **DO NOT**.
:::

Metadata can personalize behavior. For example:

```velocity
Hello ${session.metadata.user_name}, how can I help with ${session.metadata.department} today?
```

**Example request:**
```json
{
  "name": "Customer Support Tone and Style Guide",
  "description": "Defines tone and behavior for customer interactions.",
  "template": "You are a customer support agent. ALWAYS be polite and DO NOT USE technical jargon.",
  "enabled": true,
  "metadata": {
    "owner": "customer-support-team",
    "version": "1.0.0"
  }
}
```
A successful response returns the full instruction definition, including its unique ID, version, and timestamps.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to create an instruction. Currently only initial instructions are supported.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"Request object for creating a new initial instruction.","type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["type","name","template"],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}}},"oneOf":[{"description":"Request object for creating a new initial instruction.","type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["type","name","template"],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}],"title":"CreateInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"The response includes the full definition of the newly created instruction, including fields such as `id`, `version`, `created_at`, and `updated_at`.\n","content":{"application/json":{"schema":{"description":"An instruction that guides agent behavior.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}}},"oneOf":[{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}],"title":"Instruction"}}}},"400":{"description":"Instruction creation request was malformed or contains invalid content.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow creating instructions.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}}}}
>
  
</StatusCodes>


      
