---
id: create-instruction
title: "Create instruction"
description: "Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage."
sidebar_label: "Create instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage.

Instructions support dynamic content using the Apache Velocity templating engine. Velocity variables allow instructions to reference runtime context:

- `\$\tools`: The list of tools available to the agent.
- `\$\{session.metadata.field}`: Session-level metadata (user context, permissions, preferences).
- `\$\{agent.metadata.field}`: Agent-level metadata (configuration or environment).

Example tool iteration:
```velocity
You have access to the following tools:
\#foreach(\$\tool in $tools)
  - \$\{tool.name}: \$\{tool.description}
#end
```
:::tip Tips for effective instruction design
Provide clear, directive language in the template to shape the agentâ€™s behavior. You can emphasize specific requirements using capital letters or negative instructions such as **DO NOT**.

Metadata can personalize behavior. For example:

```velocity
Hello ${session.metadata.user_name}, how can I help with ${session.metadata.department} today?
```

**Example request:**
```json
{
  "name": "Customer Support Tone and Style Guide",
  "description": "Defines tone and behavior for customer interactions.",
  "template": "You are a customer support agent. ALWAYS be polite and DO NOT USE technical jargon.",
  "enabled": true,
  "metadata": {
    "owner": "customer-support-team",
    "version": "1.0.0"
  }
}
```
A successful response returns the full instruction definition, including its unique ID, version, and timestamps.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to create an instruction. Currently only initial instructions are supported.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"Request object for creating a new initial instruction.","type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["type","name","template"],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}}},"oneOf":[{"description":"Request object for creating a new initial instruction.","type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["type","name","template"],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}],"title":"CreateInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"The response includes the full definition of the newly created instruction, including fields such as `id`, `version`, `created_at`, and `updated_at`.\n","content":{"application/json":{"schema":{"description":"An instruction that guides agent behavior.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}}},"oneOf":[{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}],"title":"Instruction"}}}},"400":{"description":"Instruction creation request was malformed or contains invalid content.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow creating instructions.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}}}}
>
  
</StatusCodes>


      